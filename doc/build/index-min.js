KISSY.add("kg/progressbars/1.0.1/index",["base","node"],function(e,a,t,r){var s,i=a("base"),n=a("node");s=function(a){var t=n.all,r=i,s={typeOf:function(e){return toString.apply(e).replace(/^\[\w*\s*|\]$/gi,"")},collectionGarbage:function(e){for(var a in e)e.hasOwnProperty(a)&&delete e[a];return a=e=e.__proto__=null},emptyEventFunc:function(){}},l=r.extend({initializer:function(){var e,a,r=this,i=r.selector_=r.get("selector"),n=r.cssClass_=r.get("cssClass");r.min_=r.get("min"),r.max_=r.get("max"),r.min_=Math.min(r.min_,r.max_),r.max_=Math.max(r.min_,r.max_),e=r.min_,a=r.max_;var l=r.value_=r.get("value");e>l&&(l=e),l>a&&(l=a);var d=(r.percent_=parseInt((l-e)/(a-e)*100),r.type_=r.get("type")),c=r.tpl_=r.get("tpl");switch(d){case"percent":c=r.tpl_="{percent}%";break;case"indeterminate":case"loading":c=r.tpl_=""}var _=r.animate_=r.get("animate"),o=r.disabled_=r.get("disabled"),v=(r.hidden_=!1,r.create_=r.get("create")||s.emptyEventFunc),u=r.change_=r.get("change")||s.emptyEventFunc,p=r.complete_=r.get("complete")||s.emptyEventFunc,b=r.destroy_=r.get("destroy")||s.emptyEventFunc,g=r.$progressbar=r.get("$target"),m=r.$progressbar_volume=t(i.volume,g);switch(r.on("create",function(e){v.call(this,e)}).on("change",function(e){u.call(this,e)}).on("complete",function(e){p.call(this,e)}).on("destroy",function(e){b.call(this,e)}),d){case"value":g.addClass(n.determinate_progressbar),_&&m.addClass(n.value_change);break;case"percent":e=r.min_=0,a=r.max_=100,g.addClass(n.determinate_progressbar),_&&m.addClass(n.value_change);break;case"indeterminate":g.addClass(n.indeterminate_progressbar).addClass(n.indeterminate_active);break;case"loading":g.addClass(n.loading_progressbar).addClass(n.loading_active)}r._value(l),r._disabled(o),r._accessible(),r.fire("create")},_accessible:function(e){var a=this,t=a.$progressbar,r=a.disabled_,s=a.hidden_;if(void 0===e)return void t.attr({role:"progressbar","aria-disabled":r,"aria-hidden":s});var i=a.min_,n=a.max_,l=a.percent_,d=a.value_;switch(e){case"value":t.attr({"aria-valuemin":i,"aria-valuemax":n,"aria-valuenow":d,"aria-valuetext":d,"data-percent":l});break;case"disabled":t.attr({"aria-disabled":r});break;case"hidden":t.attr({"aria-hidden":s})}},show:function(){var e=this,a=e.$progressbar;e.animate_?a.fadeIn():a.show(),e.hidden_=!1,e._accessible("hidden")},hide:function(){var e=this,a=e.$progressbar;e.animate_?a.fadeOut():a.hide(),e.hidden_=!0,e._accessible("hidden")},setter:function(e,a){var t=this;switch(e){case"value":t._value(a);break;case"disabled":t._disabled(a);break;case"tpl":t._tpl(a)}},getter:function(e){var a,t=this;switch(e){case"value":a=t.value_;break;case"disabled":a=t.disabled_;break;case"tpl":a=t.tpl_}return a},destroy:function(){var e=this,a=e.$progressbar;return e.fire("destroy"),a.remove(),s.collectionGarbage(e)},_tpl:function(e){if("String"===s.typeOf(e)){var a=this;a.tpl_=e}},_disabled:function(e){var a=this,t=a.$progressbar,r=a.cssClass_,s=a.type_;switch(e){case!0:switch(t.addClass(r.disabled),s){case"indeterminate":t.removeClass(r.indeterminate_active);break;case"loading":t.removeClass(r.loading_active)}a.disabled_=!0;break;case!1:switch(t.removeClass(r.disabled),s){case"indeterminate":t.addClass(r.indeterminate_active);break;case"loading":t.addClass(r.loading_active)}a.disabled_=!1}a._accessible("disabled")},_value:function(a){if("Number"===s.typeOf(a)){var t,r=this,i=r.type_,n=r.$progressbar_volume,l=r.min_,d=r.max_,c=r.tpl_;l>a&&(a=l),a>d&&(a=d),r.value_=a,t=r.percent_=parseInt((a-l)/(d-l)*100),n.html(e.substitute(c,{percent:t,value:a,max:d})),("value"===i||"percent"===i)&&n.width(t+"%"),r._accessible("value"),r.fire("change"),100===t&&r.fire("complete")}}},{ATTRS:{$target:{value:"",getter:function(e){return t(e)}},selector:{value:{volume:".vc-progressbar-volume"}},cssClass:{value:{determinate_progressbar:"vc-determinate-progressbar",indeterminate_progressbar:"vc-indeterminate-progressbar",indeterminate_active:"indeterminate-progressbar-active",loading_progressbar:"vc-loading-progressbar",loading_active:"loading-progressbar-active",value_change:"value-change",disabled:"vc-progressbar-disabled"}},min:{value:0},max:{value:100},value:{value:0},tpl:{value:"{value}/{max}"},type:{value:"value"},animate:{value:!0},disabled:{value:!1}}});return l.prototype.__defineSetter__("value",function(e){var a=this;a._value(e)}),l.prototype.__defineSetter__("tpl",function(e){var a=this;a._tpl(e)}),l.prototype.__defineSetter__("disabled",function(e){var a=this;a._disabled(e)}),l.prototype.__defineGetter__("value",function(){var e=this;return e.value_}),l.prototype.__defineGetter__("tpl",function(){var e=this;return e.tpl_}),l.prototype.__defineGetter__("disabled",function(){var e=this;return e.disabled_}),a=l}(),r.exports=s});