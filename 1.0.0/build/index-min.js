KISSY.add("kg/progressbars/1.0.0/index",["base","node"],function(e,a,t,r){var s,i=a("base"),n=a("node");s=function(a){var t=n.all,r=i,s={typeOf:function(e){return toString.apply(e).replace(/^\[\w*\s*|\]$/gi,"")},collectionGarbage:function(e){for(var a in e)e.hasOwnProperty(a)&&delete e[a];return a=e=e.__proto__=null},emptyEventFunc:function(){}},l=r.extend({initializer:function(){var e,a,r=this,i=r.selector_=r.get("selector"),n=r.cssClass_=r.get("cssClass");r.min_=r.get("min"),r.max_=r.get("max"),r.min_=Math.min(r.min_,r.max_),r.max_=Math.max(r.min_,r.max_),e=r.min_,a=r.max_;var l=r.value_=r.get("value");e>l&&(l=e),l>a&&(l=a);var d=(r.percent_=parseInt(l/(a-e)*100),r.type_=r.get("type")),c=r.tpl_=r.get("tpl");switch(d){case"percent":c=r.tpl_="{percent}%";break;case"indeterminate":case"loading":c=r.tpl_=""}var o=r.animate_=r.get("animate"),_=r.disabled_=r.get("disabled"),v=(r.hidden_=!1,r.create_=r.get("create")||s.emptyEventFunc),u=r.change_=r.get("change")||s.emptyEventFunc,b=r.complete_=r.get("complete")||s.emptyEventFunc,g=r.destroy_=r.get("destroy")||s.emptyEventFunc,p=r.$progressbar=r.get("$target"),m=r.$progressbar_volume=t(i.volume,p);switch(r.on("create",function(e){v.call(this,e)}).on("change",function(e){u.call(this,e)}).on("complete",function(e){b.call(this,e)}).on("destroy",function(e){g.call(this,e)}),d){case"value":p.addClass(n.determinate_progressbar),o&&m.addClass(n.value_change);break;case"percent":e=r.min_=0,a=r.max_=100,p.addClass(n.determinate_progressbar),o&&m.addClass(n.value_change);break;case"indeterminate":p.addClass(n.indeterminate_progressbar).addClass(n.indeterminate_active);break;case"loading":p.addClass(n.loading_progressbar).addClass(n.loading_active)}r._value(l),r._disabled(_),r._accessible(),r.fire("create")},_accessible:function(e){var a=this,t=a.$progressbar,r=a.disabled_,s=a.hidden_;if(void 0===e)return void t.attr({role:"progressbar","aria-disabled":r,"aria-hidden":s});var i=a.min_,n=a.max_,l=a.percent_,d=a.value_;switch(e){case"value":t.attr({"aria-valuemin":i,"aria-valuemax":n,"aria-valuenow":d,"aria-valuetext":d,"data-percent":l});break;case"disabled":t.attr({"aria-disabled":r});break;case"hidden":t.attr({"aria-hidden":s})}},show:function(){var e=this,a=e.$progressbar;e.hidden_=!1,a.show(),e._accessible("hidden")},hide:function(){var e=this,a=e.$progressbar;e.hidden_=!0,a.hide(),e._accessible("hidden")},setter:function(e,a){var t=this;switch(e){case"value":t._value(a);break;case"disabled":t._disabled(a);break;case"tpl":t._tpl(a)}},getter:function(e){var a,t=this;switch(e){case"value":a=t.value_;break;case"disabled":a=t.disabled_;break;case"tpl":a=t.tpl_}return a},destroy:function(){var e=this,a=e.$progressbar;return e.fire("destroy"),a.remove(),s.collectionGarbage(e)},_tpl:function(e){if("String"===s.typeOf(e)){var a=this;a.tpl_=e}},_disabled:function(e){var a=this,t=a.$progressbar,r=a.cssClass_,s=a.type_;switch(e){case!0:switch(t.addClass(r.disabled),s){case"indeterminate":t.removeClass(r.indeterminate_active);break;case"loading":t.removeClass(r.loading_active)}a.disabled_=!0;break;case!1:switch(t.removeClass(r.disabled),s){case"indeterminate":t.addClass(r.indeterminate_active);break;case"loading":t.addClass(r.loading_active)}a.disabled_=!1}a._accessible("disabled")},_value:function(a){if("Number"===s.typeOf(a)){var t=this,r=t.type_;if("indeterminate"!==r&&"loading"!==r){var i,n,l=t.$progressbar_volume,d=t.min_,c=t.max_,o=t.tpl_;d>a&&(a=d),a>c&&(a=c),t.value_=a,i=c-d,n=t.percent_=parseInt(a/i*100),l.html(e.substitute(o,{percent:n,value:a,max:c})).width(n+"%"),t._accessible("value"),t.fire("change"),a===c&&t.fire("complete")}}}},{ATTRS:{$target:{value:"",getter:function(e){return t(e)}},selector:{value:{volume:".vc-progressbar-volume"}},cssClass:{value:{determinate_progressbar:"vc-determinate-progressbar",indeterminate_progressbar:"vc-indeterminate-progressbar",indeterminate_active:"indeterminate-progressbar-active",loading_progressbar:"vc-loading-progressbar",loading_active:"loading-progressbar-active",value_change:"value-change",disabled:"vc-progressbar-disabled"}},min:{value:0},max:{value:100},value:{value:0},tpl:{value:"{value}/{max}"},type:{value:"value"},animate:{value:!0},disabled:{value:!1}}});return a=l}(),r.exports=s});